<mvc:View controllerName="customer.controller.Orderdetails"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.uxap"
    xmlns:m="sap.m">
    <ObjectPageLayout preserveHeaderStateOnScroll="true" headerContentPinned="true" alwaysShowContentHeader="true" headerContentPinnable="true">
    <headerTitle>
    <ObjectPageDynamicHeaderTitle>
        <expandedHeading>
            <m:Title text="OrderID:{headermodel>/OrderID}" wrapping="true"/>
        </expandedHeading>

        <actions>
            <!-- Fullscreen button -->
            <m:Button press=".onOpenDialog" icon="sap-icon://full-screen"></m:Button>
            
            <!-- Close button -->
            <m:Button press=".onExitPress" icon="sap-icon://decline" ></m:Button>
            
            
        </actions>
    </ObjectPageDynamicHeaderTitle>
</headerTitle>

    <headerContent>
    <m:HBox >
    <m:VBox > <m:Label text="Name: {headermodel>/Customer/ContactName}" > </m:Label>
    <m:Label text="Ordered : {
      path: 'headermodel>/OrderDate',
      type: 'sap.ui.model.type.Date',
      formatOptions: { pattern: 'dd.MM.yyyy' }}">
      </m:Label>
    <m:Label text="Shipped : {
      path: 'headermodel>/ShippedDate',
      type: 'sap.ui.model.type.Date',
      formatOptions: { pattern: 'dd.MM.yyyy' }}" ></m:Label></m:VBox>
    <m:VBox class="sapUiSmallMarginBeginEnd" >
    <m:Label text="Price"></m:Label>
    <m:HBox  >
    <m:Title text="{path:'headermodel>/OrderDate', formatter:'.getOrderTotal'}"></m:Title>
    <m:Label text=" EUR" class="sapUiSmallMarginBeginEnd"></m:Label>
    </m:HBox>
    </m:VBox>
    </m:HBox>
    </headerContent>
    <sections>
    <ObjectPageSection >
    <subSections>
    <ObjectPageSubSection >
    <blocks>
    <!-- <m:Button press=".onOpenDialog" icon="sap-icon://shipping-status"></m:Button> -->
    <m:IconTabBar id="idIconTabBarMulti"
		expanded="{device>/isNoPhone}"
		class="sapUiResponsiveContentPadding">
        <m:items>
        <m:IconTabFilter icon="sap-icon://shipping-status" key="shipping info"  ><m:VBox class="sapUiSmallMargin">
                                        <m:ObjectHeader title="Shipping Address"/>
                                        <m:Text text=" Name : {headermodel>/Shipper/CompanyName}"/>
                                        <m:Text text="Street: {headermodel>/ShipAddress}"/>
                                        <m:Text text="ZIP Code: {headermodel>/ShipPostalCode}"/>
                                        <m:Text text="City: {headermodel>/ShipCity}"/>
                                        <m:Text text="Country: {headermodel>/ShipCountry}"/>
                                    </m:VBox>
                                    </m:IconTabFilter>
                                    
                                
        <m:IconTabFilter icon="sap-icon://employee" key="Processor">
        <m:content >
                                    <m:VBox class="sapUiSmallMargin">
                                        <m:ObjectHeader title="Processor Details"/>
                                        <m:Text text="Employee ID : {headermodel>/EmployeeID}"/>
                                        <m:Text text="CustomerID : {headermodel>/CustomerID}"/>
                                        <m:Text text="Email: john.doe@company.com"/>
                                        <m:Text text="Phone : {headermodel>/Employee/HomePhone}"/>
                                    </m:VBox>
                                </m:content>
        </m:IconTabFilter>
        </m:items>
        </m:IconTabBar>
    </blocks>
    </ObjectPageSubSection>
    </subSections>
    </ObjectPageSection>
    <ObjectPageSection >
    <subSections>
    <ObjectPageSubSection >
    <blocks>
    <m:Table
                    id="lineItemsTable"
                    inset="false"
                    items="{headermodel>/Order_Details/results}">

                    <!-- Table Columns -->
                    <m:columns>
                        <m:Column>
                            <m:Text  text="Product "/>
                        </m:Column>
                        <m:Column hAlign="End">
                            <m:Text text="Unit Price"/>
                        </m:Column>
                        <m:Column hAlign="End">
                            <m:Text text="Quantity"/>
                        </m:Column>
                        <m:Column hAlign="End">
                            <m:Text text="Total"/>
                        </m:Column>
                    </m:columns>

                    <!-- Table Rows -->
                    <m:items>
                        <m:ColumnListItem>
                            <m:cells>
                                <!-- Product (bold + ID below) -->
                                <m:VBox>
                                    <m:ObjectIdentifier
                                        title="{headermodel>Product/ProductName}"
                                        text="{headermodel>ProductID}"/>
                                </m:VBox>

                                <!-- Unit Price -->
                                <m:ObjectNumber
                                    number="{headermodel>UnitPrice}"
                                    unit="EUR"
                                    emphasized="true"/>

                                <!-- Quantity -->
                                <m:Text text="{headermodel>Quantity}"/>

                                <!-- Total -->
                                <m:ObjectNumber
                                    number="{ parts:[{path:'headermodel>UnitPrice'},{path:'headermodel>Quantity'}], formatter:'.formatTotal' }"
                                    unit="EUR"
                                    emphasized="true"/>
                            </m:cells>
                        </m:ColumnListItem>
                    </m:items>
                </m:Table>
    
    </blocks>
    </ObjectPageSubSection>
    </subSections>
    </ObjectPageSection>
    </sections>
    </ObjectPageLayout>
</mvc:View>